import yfinance as yf
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

tickers = ['^jkse']
stock_data_suharto = yf.download(tickers, start="1993-05-21", end="1998-05-21")
stock_data_habibi = yf.download(tickers, start="1998-05-21",end="1999-10-20")
stock_data_gusdur = yf.download(tickers, start="1999-10-20",end="2001-07-23")
stock_data_megawati = yf.download(tickers, start="2001-07-23",end="2004-10-20")
stock_data_sby1 = yf.download(tickers, start="2004-10-20",end="2009-10-20")
stock_data_sby2 = yf.download(tickers, start="2009-10-20",end="2014-10-20")
stock_data_jkw1 = yf.download(tickers, start="2014-10-20",end="2019-10-20")
stock_data_jkw2 = yf.download(tickers, start="2019-10-20",end="2024-07-18")

stock_data_ytd = yf.download(tickers, start="2019-10-20",end="2024-07-18")

plt.figure(figsize=(14,6))
plt.plot(stock_data_suharto['Adj Close'])
plt.plot(stock_data_habibi['Adj Close'])
plt.plot(stock_data_gusdur['Adj Close'])
plt.plot(stock_data_megawati['Adj Close'])
plt.plot(stock_data_sby1['Adj Close'])
plt.plot(stock_data_sby2['Adj Close'])
plt.plot(stock_data_jkw1['Adj Close'])
plt.plot(stock_data_jkw2['Adj Close'])
plt.legend(['Suharto','Habibi','Gusdur','Megawati','SBY1','SBY2','JKW1','JKW2'])
plt.xlabel('Tanggal')
plt.ylabel('Index')
plt.title('IHSG')
plt.grid(True)
plt.show()

stock_data_suharto.reset_index(inplace=True)
stock_data_habibi.reset_index(inplace=True)
stock_data_gusdur.reset_index(inplace=True)
stock_data_megawati.reset_index(inplace=True)
stock_data_sby1.reset_index(inplace=True)
stock_data_sby2.reset_index(inplace=True)
stock_data_jkw1.reset_index(inplace=True)
stock_data_jkw2.reset_index(inplace=True)

stock_data_suharto['DailyReturn'] = stock_data_suharto['Adj Close'].pct_change(1)
stock_data_suharto['CumReturnLog'] = np.exp(np.log1p(stock_data_suharto['DailyReturn']).cumsum())

stock_data_habibi['DailyReturn'] = stock_data_habibi['Adj Close'].pct_change(1)
stock_data_habibi['CumReturnLog'] = np.exp(np.log1p(stock_data_habibi['DailyReturn']).cumsum())

stock_data_gusdur['DailyReturn'] = stock_data_gusdur['Adj Close'].pct_change(1)
stock_data_gusdur['CumReturnLog'] = np.exp(np.log1p(stock_data_gusdur['DailyReturn']).cumsum())

stock_data_megawati['DailyReturn'] = stock_data_megawati['Adj Close'].pct_change(1)
stock_data_megawati['CumReturnLog'] = np.exp(np.log1p(stock_data_megawati['DailyReturn']).cumsum())

stock_data_sby1['DailyReturn'] = stock_data_sby1['Adj Close'].pct_change(1)
stock_data_sby1['CumReturnLog'] = np.exp(np.log1p(stock_data_sby1['DailyReturn']).cumsum())

stock_data_sby2['DailyReturn'] = stock_data_sby2['Adj Close'].pct_change(1)
stock_data_sby2['CumReturnLog'] = np.exp(np.log1p(stock_data_sby2['DailyReturn']).cumsum())

stock_data_jkw1['DailyReturn'] = stock_data_jkw1['Adj Close'].pct_change(1)
stock_data_jkw1['CumReturnLog'] = np.exp(np.log1p(stock_data_jkw1['DailyReturn']).cumsum())

stock_data_jkw2['DailyReturn'] = stock_data_jkw2['Adj Close'].pct_change(1)
stock_data_jkw2['CumReturnLog'] = np.exp(np.log1p(stock_data_jkw2['DailyReturn']).cumsum())


#Nilai indeks IHSG selalu meningkat, untuk itu perbandingan dilakukan dengan mencari prosentase perubahan

stock_data_suharto['DailyReturn'] = stock_data_suharto['Adj Close'].pct_change(1)
#stock_data_suharto['CumReturn'] = np.exp(np.log1p(stock_data_suharto['DailyReturn']).cumsum())
stock_data_suharto['CumReturn'] = np.cumsum(stock_data_suharto['DailyReturn'])

stock_data_habibi['DailyReturn'] = stock_data_habibi['Adj Close'].pct_change(1)
#stock_data_habibi['CumReturn'] = np.exp(np.log1p(stock_data_habibi['DailyReturn']).cumsum())
stock_data_habibi['CumReturn'] = np.cumsum(stock_data_habibi['DailyReturn'])

stock_data_gusdur['DailyReturn'] = stock_data_gusdur['Adj Close'].pct_change(1)
#stock_data_gusdur['CumReturn'] = np.exp(np.log1p(stock_data_gusdur['DailyReturn']).cumsum())
stock_data_gusdur['CumReturn'] = np.cumsum(stock_data_gusdur['DailyReturn'])

stock_data_megawati['DailyReturn'] = stock_data_megawati['Adj Close'].pct_change(1)
#stock_data_megawati['CumReturn'] = np.exp(np.log1p(stock_data_megawati['DailyReturn']).cumsum())
stock_data_megawati['CumReturn'] = np.cumsum(stock_data_megawati['DailyReturn'])

stock_data_sby1['DailyReturn'] = stock_data_sby1['Adj Close'].pct_change(1)
#stock_data_sby1['CumReturn'] = np.exp(np.log1p(stock_data_sby1['DailyReturn']).cumsum())
stock_data_sby1['CumReturn'] = np.cumsum(stock_data_sby1['DailyReturn'])

stock_data_sby2['DailyReturn'] = stock_data_sby2['Adj Close'].pct_change(1)
#stock_data_sby2['CumReturn'] = np.exp(np.log1p(stock_data_sby2['DailyReturn']).cumsum())
stock_data_sby2['CumReturn'] = np.cumsum(stock_data_sby2['DailyReturn'])

stock_data_jkw1['DailyReturn'] = stock_data_jkw1['Adj Close'].pct_change(1)
#stock_data_jkw1['CumReturn'] = np.exp(np.log1p(stock_data_jkw1['DailyReturn']).cumsum())
stock_data_jkw1['CumReturn'] = np.cumsum(stock_data_jkw1['DailyReturn'])

stock_data_jkw2['DailyReturn'] = stock_data_jkw2['Adj Close'].pct_change(1)
#stock_data_jkw2['CumReturn'] = np.exp(np.log1p(stock_data_jkw2['DailyReturn']).cumsum())
stock_data_jkw2['CumReturn'] = np.cumsum(stock_data_jkw2['DailyReturn'])

stock_data_ytd['DailyReturn'] = stock_data_ytd['Adj Close'].pct_change(1)
stock_data_ytd['CumReturn'] = np.cumsum(stock_data_ytd['DailyReturn'])
stock_data_ytd['CumReturnLog'] = np.exp(np.log1p(stock_data_ytd['DailyReturn']).cumsum())

jumlah_data = len(stock_data_ytd['Adj Close'])-1
print('Return :' f"{((stock_data_ytd['Adj Close'][jumlah_data] - stock_data_ytd['Adj Close'][1])/stock_data_ytd['Adj Close'][1]):.0%}")
print('Return Cumulative Arithmetic :' f"{(stock_data_ytd['CumReturn'].sum() / jumlah_data):.0%}")
print('Return Cumulative Log : ' f"{(stock_data_ytd['CumReturnLog'].sum() / jumlah_data):.0%}")

suharto_return = f"{(stock_data_suharto['CumReturn'].sum() / len(stock_data_suharto['CumReturn']-1)):.0%}"
habibi_return = f"{(stock_data_habibi['CumReturn'].sum() / len(stock_data_habibi['CumReturn']-1)):.0%}"
megawati_return = f"{(stock_data_megawati['CumReturn'].sum() / len(stock_data_megawati['CumReturn']-1)):.0%}"
gusdur_return = f"{(stock_data_gusdur['CumReturn'].sum() / len(stock_data_gusdur['CumReturn']-1)):.0%}"
sby1_return = f"{(stock_data_sby1['CumReturn'].sum() / len(stock_data_sby1['CumReturn']-1)):.0%}"
sby2_return = f"{(stock_data_sby2['CumReturn'].sum() / len(stock_data_sby2['CumReturn']-1)):.0%}"
jkw1_return = f"{(stock_data_jkw1['CumReturn'].sum() / len(stock_data_jkw1['CumReturn']-1)):.0%}"
jkw2_return = f"{(stock_data_jkw2['CumReturn'].sum() / len(stock_data_jkw2['CumReturn']-1)):.0%}"

plt.figure(figsize=(14,6))
plt.plot(stock_data_suharto['CumReturn'])
plt.plot(stock_data_habibi['CumReturn'])
plt.plot(stock_data_gusdur['CumReturn'])
plt.plot(stock_data_megawati['CumReturn'])
plt.plot(stock_data_sby1['CumReturn'])
plt.plot(stock_data_sby2['CumReturn'])
plt.plot(stock_data_jkw1['CumReturn'])
plt.plot(stock_data_jkw2['CumReturn'])
plt.legend(['Suharto- '+suharto_return,'Habibi- '+habibi_return,'Gusdur- '+gusdur_return,'Megawati- '+megawati_return,'SBY1- '+sby1_return,'SBY2- '+sby2_return,'JKW1- '+jkw1_return,'JKW2- '+jkw2_return])
plt.xlabel('Hari Menjabat')
plt.ylabel('Return')
plt.title('Return IHSG Presiden RI')
plt.grid(True)
plt.show()
